(function(e,d){typeof exports=="object"&&typeof module!="undefined"?module.exports=d(require("vue")):typeof define=="function"&&define.amd?define(["vue"],d):(e=typeof globalThis!="undefined"?globalThis:e||self,e.selectableInput=d(e.Vue))})(this,function(e){"use strict";const d=["onClick","placeholder"],m={key:1,class:"absolute top-0 left-0 w-full rounded p-2 border bg-gray-50"},k=["onKeyup"],h={key:0,class:"h-[200px] overflow-auto mt-2"},y=["onClick"],g={__name:"SelectableInput",props:{dataSet:{required:!0,type:Array},columnName:{required:!0,type:String},selectedDataId:{required:!1,type:Number},placeholder:{default:"Type here...",type:String}},emits:["getRecord"],setup(i,{emit:c}){const l=i,s=e.ref(!1),n=e.ref(),u=e.ref(),f=e.ref(),a=e.ref([]),p=t=>{f.value.contains(t.target)||(s.value=!1,document.removeEventListener("click",p))},b=()=>{s.value=!0,a.value=l.dataSet,document.addEventListener("click",p)};e.onMounted(()=>{a.value=l.dataSet;const t=l.dataSet.find(o=>o.id===l.selectedDataId);t&&(n.value=t[l.columnName]),c("getRecord",t)}),e.watch(l,()=>{a.value=l.dataSet;const t=l.dataSet.find(o=>o.id===l.selectedDataId);t&&(n.value=t[l.columnName]),c("getRecord",t)}),e.watchEffect(()=>{u.value&&u.value.focus()});const v=()=>{n.value||c("getRecord",null),a.value=l.dataSet.filter(t=>t[l.columnName].toLocaleLowerCase().indexOf(n.value.toLocaleLowerCase())>-1)},x=t=>{n.value=t[l.columnName],c("getRecord",t),s.value=!1,document.removeEventListener("click",p)},E=()=>{n.value=null,c("getRecord",null),a.value=l.dataSet};return(t,o)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"selectableInput",ref:f,class:"relative w-full"},[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[0]||(o[0]=r=>n.value=r),onClick:e.withModifiers(b,["prevent"]),type:"text",class:"focus:outline-none border p-2 rounded w-full relative",placeholder:i.placeholder},null,8,d),[[e.vModelText,n.value]]),n.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:E,class:"absolute right-1 top-2 rounded px-2 py-1 text-[0.8rem] bg-gray-200 text-gray-500"},"X")):e.createCommentVNode("",!0),s.value?(e.openBlock(),e.createElementBlock("div",m,[e.withDirectives(e.createElementVNode("input",{onKeyup:e.withModifiers(v,["prevent"]),ref_key:"innerInput",ref:u,"onUpdate:modelValue":o[1]||(o[1]=r=>n.value=r),type:"text",class:"focus:outline-none border p-2 rounded w-full"},null,40,k),[[e.vModelText,n.value]]),a.value.length>0?(e.openBlock(),e.createElementBlock("ul",h,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,r=>(e.openBlock(),e.createElementBlock("li",{key:r.id},[e.createElementVNode("a",{onClick:e.withModifiers(S=>x(r),["prevent"]),href:"#",class:"inline-block w-full rounded hover:bg-sky-500 p-1 hover:text-white"},e.toDisplayString(r[i.columnName]),9,y)]))),128))])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)],512))}};var w={install:(i,c)=>{i.component("SelectableInput",g)}};return w});
